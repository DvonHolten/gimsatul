#!/bin/sh
usage () {
cat<<EOF
usage: configure [ <option> ... ]

where '<option>' is one of the following:

-c     enable assertion checking
-g     debugging compile (implies '-c' and '-s')
-h     print this command line option summary
-O     force optimization (even with '-g')
-s     add symbol table
EOF
exit 1
}
debug=no
symbols=no
check=no
die () {
  echo "configure: error: $*" $* 1>&2
  exit 1
}
while [ $# -gt 0 ]
do
  case "$1" in
    -c) check=yes;;
    -g) debug=yes;;
    -h) usage; exit 0;;
    -s) symbols=yes;;
    *)  die "invalid option '$1' (try '-h')";;
  esac
  shift
done
COMPILE="gcc -Wall"
[ $debug = yes ] && check=yes
[ $debug = yes ] && symbols=yes
[ $debug = no ] && COMPILE="$COMPILE -O3"
[ $symbols = yes ] && COMPILE="$COMPILE -ggdb3"
[ $check = no ] && COMPILE="$COMPILE -DNDEBUG"
echo "$COMPILE"
rm -f makefile
sed -e "s#@COMPILE@#$COMPILE#" makefile.in > makefile
